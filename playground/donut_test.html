<!DOCTYPE html>
<html>

<head></head>

<body style="font-family: courier,monospace;">
    <div id="content" style="height:480px;width:800px">
        <script src="https://d3js.org/d3.v6.js"></script>
        <div style="float:left">
            <p>Temporal progress on PolicyCORE</p><br><br>
            <p>we are</p>
            <p>0.00%</p>
            <p>of the way there!</p>
        </div>
        <div style="float:right" id="my_datawiz"></div>
        <script type="text/javascript">
            const width = 400,
                height = 400,
                margin = 40;

            // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
            const radius = Math.min(width, height) / 2 - margin

            // append the svg object to the div called 'my_dataviz'
            const svg = d3.select("#my_datawiz")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", `translate(${width / 2}, ${height / 2})`);

            const data = { spend: 15, remaning: 30 }

            // set the color scale
            const color = d3.scaleOrdinal()
                .range(d3.schemeSet2);

            // Compute the position of each group on the pie:
            const pie = d3.pie()
                .value(function (d) { return d[1] })
            const data_ready = pie(Object.entries(data))
            // Now I know that group A goes from 0 degrees to x degrees and so on.

            // shape helper to build arcs:
            const arcGenerator = d3.arc()
                .innerRadius(0)
                .outerRadius(radius)

            // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
            svg
                .selectAll('mySlices')
                .data(data_ready)
                .join('path')
                .attr('d', arcGenerator)
                .attr('fill', 'white')
                .attr("stroke", "black")
                .style("stroke-width", "2px")
                .style("opacity", 0.7)

            // Now add the annotation. Use the centroid method to get the best coordinates
            svg
                .selectAll('mySlices')
                .data(data_ready)
                .join('text')
                .text(function (d) { return "" + d.data[0] })
                .attr("transform", function (d) { return `translate(${arcGenerator.centroid(d)})` })
                .style("text-anchor", "middle")
                .style("font-size", 17)</script>
    </div>
</body>

</html>